"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizeUrl = exports.stripFilenameFromUrl = exports.getHref = exports.getText = exports.getSrc = exports.getContent = void 0;
var MAX_TEXT_LENGTH = 300;

var getContent = function getContent(page, selector) {
  return page(selector).attr('content');
};

exports.getContent = getContent;

var getSrc = function getSrc(page, selector) {
  var result = [];
  page(selector).each(function (_i, e) {
    return result.push(page(e).attr('src'));
  });
  return result;
};

exports.getSrc = getSrc;

var getText = function getText(page, selector) {
  return page(selector).text();
};

exports.getText = getText;

var getHref = function getHref(page, selector) {
  return page(selector).attr('href');
};

exports.getHref = getHref;

var stripFilenameFromUrl = function stripFilenameFromUrl(url) {
  return url.replace(/[a-zA-Z]*\.html?$/g, '');
};

exports.stripFilenameFromUrl = stripFilenameFromUrl;

var normalizeUrl = function normalizeUrl(fullUrl, url) {
  var urlRegExp = new RegExp('^(?:[a-z]+:)?//', 'i');
  if (!url) return;
  var isFullPath = urlRegExp.test(url);
  var isAbsolutePath = /^\//i.test(url);
  if (isFullPath) return url;
  if (isAbsolutePath) return "".concat(new URL(fullUrl).origin).concat(url);
  return "".concat(stripFilenameFromUrl(fullUrl), "/").concat(url);
};

exports.normalizeUrl = normalizeUrl;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9oZWxwZXIudHMiXSwibmFtZXMiOlsiTUFYX1RFWFRfTEVOR1RIIiwiZ2V0Q29udGVudCIsInBhZ2UiLCJzZWxlY3RvciIsImF0dHIiLCJnZXRTcmMiLCJyZXN1bHQiLCJlYWNoIiwiX2kiLCJlIiwicHVzaCIsImdldFRleHQiLCJ0ZXh0IiwiZ2V0SHJlZiIsInN0cmlwRmlsZW5hbWVGcm9tVXJsIiwidXJsIiwicmVwbGFjZSIsIm5vcm1hbGl6ZVVybCIsImZ1bGxVcmwiLCJ1cmxSZWdFeHAiLCJSZWdFeHAiLCJpc0Z1bGxQYXRoIiwidGVzdCIsImlzQWJzb2x1dGVQYXRoIiwiVVJMIiwib3JpZ2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFNQSxlQUFlLEdBQUcsR0FBeEI7O0FBRU8sSUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsSUFBRCxFQUFxQkMsUUFBckI7QUFBQSxTQUEwQ0QsSUFBSSxDQUFDQyxRQUFELENBQUosQ0FBZUMsSUFBZixDQUFvQixTQUFwQixDQUExQztBQUFBLENBQW5COzs7O0FBRUEsSUFBTUMsTUFBTSxHQUFHLFNBQVRBLE1BQVMsQ0FBQ0gsSUFBRCxFQUFxQkMsUUFBckIsRUFBMEM7QUFDOUQsTUFBTUcsTUFBOEIsR0FBRyxFQUF2QztBQUNBSixFQUFBQSxJQUFJLENBQUNDLFFBQUQsQ0FBSixDQUFlSSxJQUFmLENBQW9CLFVBQUNDLEVBQUQsRUFBS0MsQ0FBTDtBQUFBLFdBQVdILE1BQU0sQ0FBQ0ksSUFBUCxDQUFZUixJQUFJLENBQUNPLENBQUQsQ0FBSixDQUFRTCxJQUFSLENBQWEsS0FBYixDQUFaLENBQVg7QUFBQSxHQUFwQjtBQUVBLFNBQU9FLE1BQVA7QUFDRCxDQUxNOzs7O0FBT0EsSUFBTUssT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQ1QsSUFBRCxFQUFxQkMsUUFBckI7QUFBQSxTQUEwQ0QsSUFBSSxDQUFDQyxRQUFELENBQUosQ0FBZVMsSUFBZixFQUExQztBQUFBLENBQWhCOzs7O0FBRUEsSUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQ1gsSUFBRCxFQUFxQkMsUUFBckI7QUFBQSxTQUEwQ0QsSUFBSSxDQUFDQyxRQUFELENBQUosQ0FBZUMsSUFBZixDQUFvQixNQUFwQixDQUExQztBQUFBLENBQWhCOzs7O0FBRUEsSUFBTVUsb0JBQW9CLEdBQUcsU0FBdkJBLG9CQUF1QixDQUFDQyxHQUFELEVBQWlCO0FBQ25ELFNBQU9BLEdBQUcsQ0FBQ0MsT0FBSixDQUFZLG9CQUFaLEVBQWtDLEVBQWxDLENBQVA7QUFDRCxDQUZNOzs7O0FBSUEsSUFBTUMsWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ0MsT0FBRCxFQUFrQkgsR0FBbEIsRUFBa0U7QUFDNUYsTUFBTUksU0FBUyxHQUFHLElBQUlDLE1BQUosQ0FBVyxpQkFBWCxFQUE4QixHQUE5QixDQUFsQjtBQUVBLE1BQUksQ0FBQ0wsR0FBTCxFQUFVO0FBRVYsTUFBTU0sVUFBVSxHQUFHRixTQUFTLENBQUNHLElBQVYsQ0FBZVAsR0FBZixDQUFuQjtBQUNBLE1BQU1RLGNBQWMsR0FBRyxPQUFPRCxJQUFQLENBQVlQLEdBQVosQ0FBdkI7QUFFQSxNQUFJTSxVQUFKLEVBQWdCLE9BQU9OLEdBQVA7QUFFaEIsTUFBSVEsY0FBSixFQUFvQixpQkFBVSxJQUFJQyxHQUFKLENBQVFOLE9BQVIsRUFBaUJPLE1BQTNCLFNBQW9DVixHQUFwQztBQUVwQixtQkFBVUQsb0JBQW9CLENBQUNJLE9BQUQsQ0FBOUIsY0FBMkNILEdBQTNDO0FBQ0QsQ0FiTSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1BWF9URVhUX0xFTkdUSCA9IDMwMFxuXG5leHBvcnQgY29uc3QgZ2V0Q29udGVudCA9IChwYWdlOiBjaGVlcmlvLlJvb3QsIHNlbGVjdG9yOiBzdHJpbmcpID0+IHBhZ2Uoc2VsZWN0b3IpLmF0dHIoJ2NvbnRlbnQnKVxuXG5leHBvcnQgY29uc3QgZ2V0U3JjID0gKHBhZ2U6IGNoZWVyaW8uUm9vdCwgc2VsZWN0b3I6IHN0cmluZykgPT4ge1xuICBjb25zdCByZXN1bHQ6IChzdHJpbmcgfCB1bmRlZmluZWQpW10gPSBbXVxuICBwYWdlKHNlbGVjdG9yKS5lYWNoKChfaSwgZSkgPT4gcmVzdWx0LnB1c2gocGFnZShlKS5hdHRyKCdzcmMnKSkpXG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgY29uc3QgZ2V0VGV4dCA9IChwYWdlOiBjaGVlcmlvLlJvb3QsIHNlbGVjdG9yOiBzdHJpbmcpID0+IHBhZ2Uoc2VsZWN0b3IpLnRleHQoKVxuXG5leHBvcnQgY29uc3QgZ2V0SHJlZiA9IChwYWdlOiBjaGVlcmlvLlJvb3QsIHNlbGVjdG9yOiBzdHJpbmcpID0+IHBhZ2Uoc2VsZWN0b3IpLmF0dHIoJ2hyZWYnKVxuXG5leHBvcnQgY29uc3Qgc3RyaXBGaWxlbmFtZUZyb21VcmwgPSAodXJsOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC9bYS16QS1aXSpcXC5odG1sPyQvZywgJycpXG59XG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemVVcmwgPSAoZnVsbFVybDogc3RyaW5nLCB1cmw6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHVybFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14oPzpbYS16XSs6KT8vLycsICdpJylcblxuICBpZiAoIXVybCkgcmV0dXJuXG5cbiAgY29uc3QgaXNGdWxsUGF0aCA9IHVybFJlZ0V4cC50ZXN0KHVybClcbiAgY29uc3QgaXNBYnNvbHV0ZVBhdGggPSAvXlxcLy9pLnRlc3QodXJsKVxuXG4gIGlmIChpc0Z1bGxQYXRoKSByZXR1cm4gdXJsXG5cbiAgaWYgKGlzQWJzb2x1dGVQYXRoKSByZXR1cm4gYCR7bmV3IFVSTChmdWxsVXJsKS5vcmlnaW59JHt1cmx9YFxuXG4gIHJldHVybiBgJHtzdHJpcEZpbGVuYW1lRnJvbVVybChmdWxsVXJsKX0vJHt1cmx9YFxufVxuIl19